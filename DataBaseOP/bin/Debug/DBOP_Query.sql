-- CREATE Database

CREATE DATABASE DataBaseOP;
USE DataBaseOP;

CREATE TABLE Position
(
ID INT PRIMARY KEY IDENTITY,
Name NVARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE Worker
(
ID INT PRIMARY KEY IDENTITY,
FIO NVARCHAR(100) NOT NULL,
Phone NVARCHAR(11) NOT NULL UNIQUE,
PositionID INT REFERENCES Position(ID) NOT NULL
);

CREATE TABLE Category
(
ID INT PRIMARY KEY IDENTITY,
Name NVARCHAR(100) NOT NULL UNIQUE
);

CREATE TABLE Trademark
(
ID INT PRIMARY KEY IDENTITY,
Name NVARCHAR(100) NOT NULL UNIQUE,
Address NVARCHAR(200) NOT NULL,
Phone NVARCHAR(11) NOT NULL UNIQUE
);

CREATE TABLE Product
(
ID INT PRIMARY KEY IDENTITY,
Name NVARCHAR(100) NOT NULL UNIQUE,
Amount INT NOT NULL,
Unit NVARCHAR(20) NOT NULL,
Cost MONEY NOT NULL,
CategoryID INT REFERENCES Category(ID) NOT NULL,
Description NVARCHAR(500) NOT NULL,
TrademarkID INT REFERENCES Trademark(ID) NOT NULL
);

CREATE TABLE Supplier
(
ID INT PRIMARY KEY IDENTITY,
FIO NVARCHAR(100) NOT NULL,
Address NVARCHAR(200) NOT NULL,
Phone NVARCHAR(11) NOT NULL UNIQUE
);

CREATE TABLE Realization
(
ID INT PRIMARY KEY IDENTITY,
Number NVARCHAR(8) NOT NULL UNIQUE,
RealizeDate DATE NOT NULL,
SupplierID INT REFERENCES Supplier(ID),
SeniorID INT REFERENCES Worker(ID),
Cost MONEY NOT NULL,
Discount MONEY NOT NULL,
AmountDue MONEY NOT NULL,
PaidOf MONEY NOT NULL,
Change MONEY NOT NULL,
AmountProducts INT NOT NULL,
ProductID INT REFERENCES Product(ID),
Realized BIT NOT NULL
);


-- INIT Database

INSERT INTO Position (Name)
VALUES 'Менеджер', 'Бухгалтер', 'Директор'

INSERT INTO Worker (FIO, Phone, PositionID)
VALUSE 
('Емельянов Терентий Куприянович', '', 1),
('Фролов Андрей Александрович', '', '', 2),
('Чернов Харитон Федорович', '', '', 3),

-- PROCEDURES

